<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title><%= @presentation.name %></title>
  <style>
    <%= File::read("#{Rails.root}/app/views/output-templates/bodlanes-common.css").html_safe %>
    <%= File::read("#{Rails.root}/app/views/output-templates/heritage-fs/heritage-fs.css").html_safe %>
    <%= @presentation.plugin_css %>
    <%= @presentation.custom_css %>
  </style>
  <%= csrf_meta_tags %>
</head>
<body style="zoom: <%= params[:zoom] || 1 %>">
  <% @content_areas.each do |ca| %>
    <div class="content-area <%= ca.name.parameterize %>" data-id="<%= ca.id %>" data-name="<%= ca.name %>"></div>
  <% end %>

  <script type="application/json" id="presentation-json">
    <%= @presentation.to_json.html_safe %>
  </script>
  <script type="application/json" id="content-blocks-json">
    <%= ((params[:action] == 'download') ? @content_blocks.to_json.gsub(/(["'])\/media\//, "\\1media/") : @content_blocks.to_json).html_safe %>
  </script>
  <script src="/jquery-3.1.0.min.js"></script>
  <script>
    <%= File::read("#{Rails.root}/app/views/output-templates/jquery-3.1.0.min.js").html_safe %>
    <%= File::read("#{Rails.root}/app/views/output-templates/bodlanes-core.js").html_safe %>
    <%= @presentation.plugin_js %>
  </script>

  <%= render('presentations/inline_editor') if params[:inline_edit] %>
</body>
</html>
